# brand-ambassador
## Амбассадор бренда для Woocommerce

## <a href="https://github.com/avs-alexandra/brand-ambassador/releases/download/v1.0.4/brand-ambassador.zip">Скачать плагин</a>

Лёгкий, но функциональный плагин для программы Амбассадор бренда для Woocommerce.
<br>Суть: компания приглашает к сотрудничеству Амбассадоров бренда и предоставляет личный купон. 
<br>Например, за первый заказ клиента от 2500 руб с применением купона (клиент при этом получает скидку 10%), Амбассадор получает 500 руб выплаты (вознаграждение).

<br>В плагине можно сделать 2 уровня выплат (можете использовать только один уровень)
<br>Например, Программа Амбассадоры бренда для Блогеров - 450 руб
<br>Программа Амбассадор бренда для Экспертов - 600 руб
<br>(название программы видны только в админке, на сайте можете придумать любые названия)

<br>Вы можете изменить сумму выплат. Ведь ничто так не мотивирует людей рекламировать, как выплаты живыми деньгами!
________________________________________________________________________________________________________________
________________________________________________________________________________________________________________
________________________________________________________________________________________________________________
### 1. Шаг В админке зайдите в - Маркетинг - Настройки Амбассадора
Внимание! Для корректной работы включите WooCommerce High-Performance Order Storage (HPOS)

И установите роли для программ. Роли должны быть разные! Например, с помощью User Role Editor, вы можете создать дополнительные роли. 
<br>В дальнейшем это важно для корректных расчётов и отображения информации о выплатах в личном кабинете пользователей.

<img width="480" alt="Снимок экрана 2025-05-08 в 18 59 05" src="https://github.com/user-attachments/assets/5fa21641-31a1-4ddc-b289-5f2506445feb" />

________________________________________________________________________________________________________________
### 2. Шаг Создайте купон

Привяжите к купону Амбассадора бренда. Привязать можно только с той ролью, которую Вы установили в настройках!
<br>Привязать к купону можно только ОДНОГО Амбассадора. Если Вы не можете привязать пользователя, то значит он привязан к другому купону.
<br>В настройках пользователя теперь появиться также информация в какой программе он участвует и его купон.

<img width="480" alt="Снимок экрана 2025-05-08 в 18 57 51" src="https://github.com/user-attachments/assets/48627b4e-3f05-4427-816f-df7c653735a5" />

________________________________________________________________________________________________________________

### 3. Шаг таблица выплат
В админке зайдите в - Маркетинг - Выплаты по купонам. 
<br>У Вас есть таблица, но она пока пустая. Создайте тестовый заказ (со статусом ВЫПОЛНЕН!) с применением купона и посмотрите, чтобы появилась строка в таблице. 
<br>Также здесь Вы можете менять статус выплаты, когда будите переводить денежные средства Амбассадору. 
<br>Проверьте, что письмо пришло Амбассадору бренда о том, что кто-то купил с применением его купона. Письмо отправляется, когда заказ будет со статусом выполнен.

![шаг 3](https://github.com/user-attachments/assets/81242dd4-604e-4a92-b1a1-331b228d16b9)

________________________________________________________________________________________________________________

### 4. Шаг выведем в личном кабинете Амбассадора бренда купон, форму и статистику. 
Добавьте шорткоды в личном кабинете пользователя и стилизуйте их на своё усмотрение.

Шорткоды:
<br>[user_coupon_name] - Купон Амбассадора
<br>[user_related_orders] - Статистика заказов
<br>[user_total_orders] - Общая статистика
<br>[ambassador_bank_form] - Форма ввода банковской карты
<br>[ambassador_card_number] - Отобразить последние 4 цифры номера карты, если карта уже добавлена
<br> Метаполе user_bankname - название банка
<br>Номера банковских карт шифруются для безопасности данных. ФЗ № 152-ФЗ "О персональных данных"

<br>Например, для шорткода [user_related_orders], css код:

```css
selector .apply-buttons{background-color:#61C6CC;margin-top:10px;}
selector .apply-buttons:hover{background-color:#5AB9BE;}
selector .filter-select{border:2px solid #61C6CC;border-radius:10px;padding:8px 10px;width:230px;margin-top:2px;}
selector .selected-month-year-title{font-weight:bold;margin-top:30px;margin-bottom:8px;}
selector .payout{margin-top:16px;padding:10px 18px;background:#E5D4EF;border-radius:8px;font-size:15px;width:fit-content;}
.user-related-orders ul{list-style-type:none;padding:0;margin:0px 0px;}
.other-statuses-title{margin-top:20px;color:#989898;margin-bottom:8px;font-size:15px;}
.other-statuses-list{color:#989898;font-size:14px;}
.other-statuses-none{color:#989898;font-size:15px;margin-bottom:8px;}
.user-related-orders ul li {
    border-bottom: 2px dotted #bbbbbb; 
    padding-top:4px;}
.user-related-orders ul li:last-child {
    border-bottom: none;}
.reward-note {font-size: 14px; color: #555;margin-top: 20px;}
```

<img width="500" alt="Снимок экрана 2025-05-08 в 20 32 45" src="https://github.com/user-attachments/assets/0df15666-26b1-46a6-ae0f-5aca33acb857" />

<img width="500" alt="Снимок экрана 2025-05-08 в 18 20 30" src="https://github.com/user-attachments/assets/6c6bd8f2-9319-40f3-ac13-1e01e42a34ae" />

________________________________________________________________________________________________________________

### 5. Разместите условия программы Амбассадора бренда на странице вашего сайта. Налоги.
Предоставьте промоматериалы для амбассадоров, чтобы они смогли размещать информцию о вашем магазине/бренде товаров в фирменном стиле и размещать свой промокод.
<br>Также расскажите Амбассадору, что рекламу необходимо регистрировать. 
<br>Что касается налогов. 
<br>Если у вас ООО или ИП, то для того, чтобы переводить физ.л. нужно заключить договор ГПХ (оплатить НДФЛ, страх. взносы).
<br>Либо попросите Амбассадора открыть самозанятость (1 минута, скачать приложение Мой налог) и тогда перевод с р/с будет самозанятому, а самозанятый платит 6% налога.
<br>Если Вы будите переводить со своей личной карты на карту амбассадора, то это будет неофициальной выплатой и при большом количество переводов у налоговой могут возникнуть вопросы.
<br>Обговорите этот вопрос с вашим бухгалтером, также в законе есть понятие комиссионный доход.
<br>Кстати важно, Амбассадор не может воспользоваться собственным промокодом, чтобы люди не придумывали схемы.

________________________________________________________________________________________________________________

### 6. Обработка и защита персональных данных
Добавье в раздел "Обработка и защита персональных данных"
<br>"Все номера банковских карт шифруются с использованием алгоритма AES-256-CBC, который является одним из самых надёжных стандартов шифрования."
________________________________________________________________________________________________________________
<br>Ограничьте доступ к странице выплат для лучшей безопасности персональных данных. 
<br>Добавье сниппет-код:

```php
//доступ к странице выплат по купонам
add_filter('coupon_payouts_page_access', function($has_access) {
    return current_user_can('administrator') || current_user_can('shop_manager');
});
```

